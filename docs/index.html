<!doctype html>
<html class="no-js" lang="">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <title>@stomp/ng2-stompjs documentation</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <link rel="icon" type="image/x-icon" href="./images/favicon.ico">
	    <link rel="stylesheet" href="./styles/style.css">
    </head>
    <body>

        <div class="navbar navbar-default navbar-fixed-top visible-xs">
            <a href="./" class="navbar-brand">@stomp/ng2-stompjs documentation</a>
            <button type="button" class="btn btn-default btn-menu fa fa-bars" id="btn-menu"></button>
        </div>

        <div class="xs-menu menu" id="mobile-menu">
            <div id="book-search-input" role="search">
                <input type="text" placeholder="Type to search">
            </div>
            <nav>
            
                <ul class="list">
            
                    <li class="title">
                        <a href="./index.html">@stomp/ng2-stompjs documentation</a>
                    </li>
            
                    <li class="divider"></li>
            
            
                    <li class="chapter">
                        <a data-type="chapter-link" href="./index.html"><span class="fa fa-home"></span>Getting started</a>
                        <ul class="links">
                                <li class="link">
                                    <a 
                                        
                                         href="./overview.html" 
                                         href="./overview.html" 
                                        >
                                        <span class="fa fa-th"></span>Overview
                                    </a>
                                </li>
                                <li class="link">
                                  <a href="./index.html"  class="active" ><span class="fa fa-file-text-o"></span>README</a>
                                </li>
                        </ul>
                    </li>
            
            
            
            
            
            
                    <li class="chapter">
                        <div class="simple menu-toggler" data-toggle="collapse"
                                data-target="#xs-injectables-links"
                            >
                            <span class="fa fa-long-arrow-down"></span>
                            <span>Injectables</span>
                            <span class="fa fa-angle-down"></span>
                        </div>
                        <ul class="links collapse "
                                id="xs-injectables-links"
                            >
                                <li class="link">
                                    <a href="./injectables/StompConfig.html" >StompConfig</a>
                                </li>
                                <li class="link">
                                    <a href="./injectables/StompRService.html" >StompRService</a>
                                </li>
                                <li class="link">
                                    <a href="./injectables/StompService.html" >StompService</a>
                                </li>
                        </ul>
                    </li>
            
            
            
            
                    <li class="chapter">
                        <div class="simple menu-toggler" data-toggle="collapse"
                                data-target="#xs-miscellaneous-links"
                            >
                            <span class="fa fa-cubes"></span>
                            <span>Miscellaneous</span>
                            <span class="fa fa-angle-down"></span>
                        </div>
                        <ul class="links collapse "
                                id="xs-miscellaneous-links"
                            >
                                <li class="link">
                                  <a href="./miscellaneous/enumerations.html" data-type="entity-link" >Enums</a>
                                </li>
                                <li class="link">
                                  <a href="./miscellaneous/typealiases.html" data-type="entity-link" >Type aliases</a>
                                </li>
                        </ul>
                    </li>
            
            
                    <li class="chapter">
                        <a data-type="chapter-link" href="./coverage.html" ><span class="fa fa-tasks"></span>Documentation coverage</a>
                    </li>
            
                    <li class="divider"></li>
                    <li class="copyright">
                            Documentation generated using <a href="https://compodoc.github.io/website/" target="_blank">
                                        <img src=".//images/compodoc-vectorise.svg" class="img-responsive">
                            </a>
                    </li>
            
                </ul>
            
            </nav>
        </div>

        <div class="container-fluid main">
           <div class="row main">
               <div class="hidden-xs menu">
                   <nav>
                   
                       <ul class="list">
                   
                           <li class="title">
                               <a href="./index.html">@stomp/ng2-stompjs documentation</a>
                           </li>
                   
                           <li class="divider"></li>
                   
                               <div id="book-search-input" role="search">
                                   <input type="text" placeholder="Type to search">
                               </div>
                   
                           <li class="chapter">
                               <a data-type="chapter-link" href="./index.html"><span class="fa fa-home"></span>Getting started</a>
                               <ul class="links">
                                       <li class="link">
                                           <a 
                                               
                                                href="./overview.html" 
                                                href="./overview.html" 
                                               >
                                               <span class="fa fa-th"></span>Overview
                                           </a>
                                       </li>
                                       <li class="link">
                                         <a href="./index.html"  class="active" ><span class="fa fa-file-text-o"></span>README</a>
                                       </li>
                               </ul>
                           </li>
                   
                   
                   
                   
                   
                   
                           <li class="chapter">
                               <div class="simple menu-toggler" data-toggle="collapse"
                                       data-target="#injectables-links"
                   >
                                   <span class="fa fa-long-arrow-down"></span>
                                   <span>Injectables</span>
                                   <span class="fa fa-angle-down"></span>
                               </div>
                               <ul class="links collapse "
                                       id="injectables-links"
                   >
                                       <li class="link">
                                           <a href="./injectables/StompConfig.html" >StompConfig</a>
                                       </li>
                                       <li class="link">
                                           <a href="./injectables/StompRService.html" >StompRService</a>
                                       </li>
                                       <li class="link">
                                           <a href="./injectables/StompService.html" >StompService</a>
                                       </li>
                               </ul>
                           </li>
                   
                   
                   
                   
                           <li class="chapter">
                               <div class="simple menu-toggler" data-toggle="collapse"
                                       data-target="#miscellaneous-links"
                   >
                                   <span class="fa fa-cubes"></span>
                                   <span>Miscellaneous</span>
                                   <span class="fa fa-angle-down"></span>
                               </div>
                               <ul class="links collapse "
                                       id="miscellaneous-links"
                   >
                                       <li class="link">
                                         <a href="./miscellaneous/enumerations.html" data-type="entity-link" >Enums</a>
                                       </li>
                                       <li class="link">
                                         <a href="./miscellaneous/typealiases.html" data-type="entity-link" >Type aliases</a>
                                       </li>
                               </ul>
                           </li>
                   
                   
                           <li class="chapter">
                               <a data-type="chapter-link" href="./coverage.html" ><span class="fa fa-tasks"></span>Documentation coverage</a>
                           </li>
                   
                           <li class="divider"></li>
                           <li class="copyright">
                                   Documentation generated using <a href="https://compodoc.github.io/website/" target="_blank">
                                               <img src=".//images/compodoc-vectorise.svg" class="img-responsive">
                                   </a>
                           </li>
                   
                       </ul>
                   
                   </nav>
               </div>
               <div class="content getting-started">
                   <div class="content-data">

<h1 id="-stomp-ng2-stompjs">@stomp/ng2-stompjs</h1>
<p><a href="https://travis-ci.org/stomp-js/ng2-stompjs"><img src="https://travis-ci.org/stomp-js/ng2-stompjs.svg?branch=master" alt="Build Status" class="img-responsive"></a></p>
<p>An Angular (Angular2, Angular4, ...) style wrapper for @stomp/stompjs.</p>
<h2 id="compatibility">Compatibility</h2>
<p>There were compatibility issues reported, so this project has now switched to
source distribution. In case it does not work for your 
setup, please raise a ticket.</p>
<p>Tested with Angular2 (2.4.0), Angular4 (4.0.0), Angular (5.0.0), and 
ionic projects created with Angular CLI.</p>
<p>See notes below for Angular 5 and ionic.</p>
<h2 id="changelog">Changelog</h2>
<h3 id="0-6-2">0.6.2</h3>
<ul>
<li>Added ability to get server headers from CONNECTED Frame 
<a href="https://stomp-js.github.io/ng2-stompjs/classes/stomprservice.html#serverheadersobservable">https://stomp-js.github.io/ng2-stompjs/classes/stomprservice.html#serverheadersobservable</a></li>
<li>Enabled Travis</li>
</ul>
<h3 id="0-6-1">0.6.1</h3>
<ul>
<li>Updated underlying dependencies</li>
</ul>
<h3 id="0-6-0">0.6.0</h3>
<ul>
<li>Jump in version number to indicate compiled JS release</li>
<li>Improved Angular 5 support</li>
</ul>
<h3 id="0-4-3">0.4.3</h3>
<ul>
<li>Ability to delay initialization.</li>
<li>Angular 5 compatibility</li>
</ul>
<h3 id="0-4-2">0.4.2</h3>
<p>Initial <a href="https://github.com/stomp-js/ng2-stompjs/blob/master/SockJS.md">SockJS Support</a>.
Sample at <a href="https://github.com/stomp-js/ng4-stompjs-demo/tree/sockjs">https://github.com/stomp-js/ng4-stompjs-demo/tree/sockjs</a></p>
<h3 id="0-4-0">0.4.0</h3>
<p>Updated to make it compliant to possible use of APP_INITIALIZER. Please note
that way to initiate the service has changed. It no longer uses StompConfigService.
StompConfig is directly injected as dependency into StompService.</p>
<h3 id="0-3-8">0.3.8</h3>
<ul>
<li>Switched to source distribution. The npm bundle now only has .ts files.</li>
</ul>
<h3 id="0-3-5">0.3.5</h3>
<ul>
<li>Test case at <a href="https://github.com/stomp-js/ng2-stompjs-testbed">https://github.com/stomp-js/ng2-stompjs-testbed</a> these
will be merged into main repository in future. Currently unable
to configure Karma correctly in the main project. Any help appreciated.</li>
</ul>
<h3 id="0-3-4">0.3.4</h3>
<ul>
<li>added references to GitHub pages.</li>
</ul>
<h3 id="0-3-0">0.3.0</h3>
<ul>
<li>Configuration structure has changed, user/password are not part of header.</li>
<li>Support for headers in connect, subscribe, and publish.</li>
<li>Typedoc for API documentation.</li>
</ul>
<h2 id="installation">Installation</h2>
<p>To install this library, run:</p>
<pre class="line-numbers"><code class="language-bash">$ npm install &#64;stomp/ng2-stompjs --save</code></pre><p>or, if using yarn</p>
<pre class="line-numbers"><code class="language-bash">$ yarn add &#64;stomp/ng2-stompjs</code></pre><p>This will additionally install @stomp/stompjs 
from <a href="https://github.com/stomp-js/stomp-websocket">https://github.com/stomp-js/stomp-websocket</a></p>
<h2 id="usage">Usage</h2>
<ul>
<li>See API documentation at 
<a href="https://stomp-js.github.io/ng2-stompjs/classes/stompservice.html">https://stomp-js.github.io/ng2-stompjs/classes/stompservice.html</a>
and <a href="https://stomp-js.github.io/ng2-stompjs/index.html">https://stomp-js.github.io/ng2-stompjs/index.html</a></li>
<li>See <a href="https://github.com/stomp-js/ng4-stompjs-demo">https://github.com/stomp-js/ng4-stompjs-demo</a> for a working sample
using Angular4 and Angular CLI.</li>
<li>See <a href="https://github.com/stomp-js/ng2-stompjs-demo">https://github.com/stomp-js/ng2-stompjs-demo</a> for a working sample
using Angular2 and Angular CLI. This version also demonstrates fetching
Stomp configuration using an http call (APP_INITIALIZER).</li>
<li>See <a href="https://github.com/stomp-js/ng2-stompjs/blob/master/SockJS.md">SockJS Support</a>.
<a href="https://github.com/stomp-js/ng4-stompjs-demo/tree/sockjs">https://github.com/stomp-js/ng4-stompjs-demo/tree/sockjs</a> for a sample
using SockJS.</li>
</ul>
<h3 id="agular-5-ionic">Agular 5 &amp; Ionic</h3>
<p><strong>If you are using version 0.6.0 or higher you should not need
any of this. Please report an issue if still you need to do any of
these.</strong></p>
<p>This project is distributed as ts files.
You need to instruct the compiler to include files from this library to be compiled
as part of the build process.</p>
<h4 id="angular-5">Angular 5</h4>
<ul>
<li>Sample at <a href="https://github.com/stomp-js/ng5-stompjs-demo">https://github.com/stomp-js/ng5-stompjs-demo</a></li>
<li>In <code>src/tsconfig.app.json</code> place the following in <code>compilerOptions</code>:<pre class="line-numbers"><code class="language-javascript">  &quot;paths&quot;: {
      &quot;&#64;stomp/ng2-stompjs&quot;: [&quot;../node_modules/&#64;stomp/ng2-stompjs&quot;]
  }</code></pre>See: <a href="https://github.com/stomp-js/ng5-stompjs-demo/blob/3594c458f98e7c4523b7d274c6dbf94e600f2c8c/src/tsconfig.app.json#L7">https://github.com/stomp-js/ng5-stompjs-demo/blob/3594c458f98e7c4523b7d274c6dbf94e600f2c8c/src/tsconfig.app.json#L7</a></li>
</ul>
<h4 id="ionic">Ionic</h4>
<ul>
<li>Sample at <a href="https://github.com/sjbwylbs/ionic-ng2-stompjs">https://github.com/sjbwylbs/ionic-ng2-stompjs</a></li>
<li>In <code>tsconfig.json</code> ensure the following:<pre class="line-numbers"><code class="language-javascript">{
&quot;compilerOptions&quot;: {
  ...
  &quot;baseUrl&quot;: &quot;./src&quot;,
  &quot;paths&quot;: {
    &quot;&#64;stomp/ng2-stompjs&quot;: [&quot;../node_modules/&#64;stomp/ng2-stompjs&quot;]
  },
  ...
}
...
}</code></pre></li>
<li>See: <a href="https://github.com/sjbwylbs/ionic-ng2-stompjs/blob/c0bd2e0d216c289fbb0225992969d826ee8d2459/tsconfig.json#L15">https://github.com/sjbwylbs/ionic-ng2-stompjs/blob/c0bd2e0d216c289fbb0225992969d826ee8d2459/tsconfig.json#L15</a></li>
</ul>
<h3 id="prerequisites">Prerequisites</h3>
<ul>
<li>You will need to have a Stomp broker running.</li>
<li>Sample code on this page assumes you have
RabbitMQ running with default settings and Web STOMP plugin activated.
(see: <a href="https://www.rabbitmq.com/web-stomp.html">https://www.rabbitmq.com/web-stomp.html</a>).</li>
</ul>
<h3 id="all-the-hard-work">All the Hard Work</h3>
<ul>
<li>The main service is StompService, which will need to be provided.</li>
<li>The STOMP Broker connection details will need to be provided via<br>class StompConfig. See the samples for several ways to configure.
See <a href="https://angular.io/docs/ts/latest/guide/dependency-injection.html">https://angular.io/docs/ts/latest/guide/dependency-injection.html</a> for
background reading.</li>
<li>Sample config:</li>
</ul>
<pre class="line-numbers"><code class="language-typescript">    const stompConfig: StompConfig = {
      // Which server?
      url: &#39;ws://127.0.0.1:15674/ws&#39;,

      // Headers
      // Typical keys: login, passcode, host
      headers: {
        login: &#39;guest&#39;,
        passcode: &#39;guest&#39;
      },

      // How often to heartbeat?
      // Interval in milliseconds, set to 0 to disable
      heartbeat_in: 0, // Typical value 0 - disabled
      heartbeat_out: 20000, // Typical value 20000 - every 20 seconds

      // Wait in milliseconds before attempting auto reconnect
      // Set to 0 to disable
      // Typical value 5000 (5 seconds)
      reconnect_delay: 5000,

      // Will log diagnostics on console
      debug: true
    };</code></pre><ul>
<li>See <a href="https://github.com/stomp-js/ng4-stompjs-demo/blob/master/src/app/app.module.ts">https://github.com/stomp-js/ng4-stompjs-demo/blob/master/src/app/app.module.ts</a> 
for a sample code file with configuration passed from a local
hash. Feel free to copy and modify this file.</li>
<li>See <a href="https://github.com/stomp-js/ng2-stompjs-demo/blob/master/src/app/app.module.ts">https://github.com/stomp-js/ng2-stompjs-demo/blob/master/src/app/app.module.ts</a>
for a sample code file with configuration fetched from a http
resource.</li>
<li>Assuming the config specified as a <code>const</code>, code sample to 
provide <code>StompService</code> and <code>StompConfig</code> will look like:</li>
</ul>
<pre class="line-numbers"><code class="language-typescript">  providers: [
    StompService,
    {
      provide: StompConfig,
      useValue: stompConfig
    }
  ]</code></pre><ul>
<li>See <a href="https://github.com/stomp-js/ng4-stompjs-demo/blob/master/src/app/app.module.ts">https://github.com/stomp-js/ng4-stompjs-demo/blob/master/src/app/app.module.ts</a>
for a sample file.</li>
</ul>
<h3 id="reap-the-benefits">Reap the Benefits</h3>
<h4 id="inject-stompservice">Inject StompService</h4>
<p>In your constructor (typically of a component or a service), inject
  <code>StompService</code> as a dependency:</p>
<pre class="line-numbers"><code class="language-typescript">constructor(private _stompService: StompService) { }</code></pre><h4 id="subscribe-to-a-queue">Subscribe to a queue</h4>
<p>The queue name structure and semantics vary
based on your specific STOMP Broker, 
see: <a href="https://www.rabbitmq.com/stomp.html">https://www.rabbitmq.com/stomp.html</a>
for RabbitMQ specific details.</p>
<p>Call <code>subscribe(queueName: string, headers: StompHeaders = {})</code> 
with name of the queue which returns an Observable (details at:
<a href="https://stomp-js.github.io/ng2-stompjs/classes/stompservice.html#subscribe">https://stomp-js.github.io/ng2-stompjs/classes/stompservice.html#subscribe</a>). Any
of Observable specific operators (map, filter, subscribe, etc.) can be
applied on it. This can also be set into a template with <code>async</code> pipe.</p>
<p>Example:</p>
<pre class="line-numbers"><code class="language-typescript">    let stomp_subscription = this._stompService.subscribe(&#39;/topic/ng-demo-sub&#39;);

    stomp_subscription.map((message: Message) =&gt; {
      return message.body;
    }).subscribe((msg_body: string) =&gt; {
      console.log(`Received: ${msg_body}`);
    });</code></pre><p>The <code>Message</code> class comes from <code>@stomp/stompjs</code>. So, you will need the
following import in the classes where you consume messages:</p>
<pre class="line-numbers"><code class="language-typescript">import {Message} from &#39;&#64;stomp/stompjs&#39;;</code></pre><h4 id="unsubscribe-from-a-queue">Unsubscribe from a queue</h4>
<p>Not a likely chance that you would need it.</p>
<p>You will need to unsubscribe from stomp_subscription (which is an Observer),
it will then internally unsubscribe from the underlying STOMP queue
subscription.</p>
<h4 id="publishing-messages">Publishing messages</h4>
<p>Call <code>publish(queueName: string, message: string, headers: StompHeaders = {})</code> 
(details at: <a href="https://stomp-js.github.io/ng2-stompjs/classes/stompservice.html#publish">https://stomp-js.github.io/ng2-stompjs/classes/stompservice.html#publish</a>).
Example:</p>
<pre class="line-numbers"><code class="language-typescript">this._stompService.publish(&#39;/topic/ng-demo-sub&#39;, &#39;My important message&#39;);</code></pre><p>Please note that message is actually string. So, if you need to send JSON
you will need to convert it into string (typically using 
<code>JSON.stringify()</code>)</p>
<h4 id="watching-for-stomp-connection-status">Watching for Stomp connection status</h4>
<ul>
<li><code>stompService.state</code> is a <code>BehaviorSubject</code> which maintains and switches
its value as per the underlying Stomp Connection status.</li>
<li>The value is from an enum with these possible values: 
  CLOSED, TRYING, CONNECTED, and DISCONNECTING.</li>
<li>The following code will subscribe to <code>stompService.state</code> and covert
the enum value (which is a number) to the corresponding string value:</li>
</ul>
<pre class="line-numbers"><code class="language-typescript">    this._stompService.state
      .map((state: number) =&gt; StompState[state])
      .subscribe((status: string) =&gt; {
      console.log(`Stomp connection status: ${status}`);
    });</code></pre><p>If you are interested in watching only when connection is established, you can
subscribe to <code>this._stompService.connectObservable</code>.</p>
<h4 id="delayed-initialization">Delayed initialization</h4>
<p>While often it is possible using Angular dependency injection techniques and
APP_INITIALIZER to delay the initialization till the configuration is ready
(may be fetched using an API call). See a sample at:
<a href="https://github.com/stomp-js/ng2-stompjs-demo">https://github.com/stomp-js/ng2-stompjs-demo</a></p>
<p>If a manual control is needed on the initialization process there is an additional
class <code>StompRService</code>, inject it instead of <code>StompService</code>. This has few additional
methods to assign a configuration and manually connect.</p>
<pre class="line-numbers"><code class="language-typescript">// Do not provide StompService or StompConfig, only provide StompRService

  providers: [
    StompRService
  ]</code></pre><pre class="line-numbers"><code class="language-typescript">class YourClass {}
    constructor(private _stompService: StompRService) { }

    public initStomp() {
      StompConfig config;

      cofig = this.fetchConfigFromSomeWhere();

      this._stompService.config = config;
      this._stompService.initAndConnect();
    }
}</code></pre><p><code>subscribe</code> and <code>publish</code> can be called even before call to <code>initAndConnect</code>.
These however will be interally queued till actual connection is successful.</p>
<p>For the curious - <code>initAndConnect</code> may be called more than once with potentially
updated config.</p>
<h2 id="development">Development</h2>
<p>After checking out, install the dependencies:</p>
<pre class="line-numbers"><code class="language-bash">$ npm install</code></pre><p>or, if using yarn</p>
<pre class="line-numbers"><code class="language-bash">$ yarn</code></pre><p>To generate documentation:</p>
<pre class="line-numbers"><code class="language-bash">$ npm run doc</code></pre><p>To lint all <code>*.ts</code> files:</p>
<pre class="line-numbers"><code class="language-bash">$ npm run lint</code></pre><h2 id="contributors">Contributors</h2>
<ul>
<li><a href="https://github.com/sjmf">Sam Finnigan</a></li>
<li><a href="https://github.com/JimiC">Jimi (Dimitris) Charalampidis</a></li>
<li><a href="https://github.com/kum-deepak">Deepak Kumar</a></li>
<li>Everyone involved at <a href="https://github.com/stomp-js/stomp-websocket">https://github.com/stomp-js/stomp-websocket</a></li>
</ul>
<h2 id="license">License</h2>
<p>MIT</p>














                   </div><div class="search-results">
    <div class="has-results">
        <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
        <ul class="search-results-list"></ul>
    </div>
    <div class="no-results">
        <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
    </div>
</div>
</div>
           </div>
       </div>

       <script src="./js/libs/bootstrap-native.js"></script>

       <script src="./js/libs/es6-shim.min.js"></script>
       <script src="./js/libs/EventDispatcher.js"></script>
       <script src="./js/libs/promise.min.js"></script>
       <script src="./js/libs/zepto.min.js"></script>

       <script src="./js/compodoc.js"></script>

       <script>var COMPODOC_CURRENT_PAGE_DEPTH = 0;</script>

       <script src="./js/search/search.js"></script>
       <script src="./js/search/lunr.min.js"></script>
       <script src="./js/search/search-lunr.js"></script>

       <script src="./js/tabs.js"></script>
       <script src="./js/menu.js"></script>
       <script src="./js/libs/prism.js"></script>
       <script src="./js/sourceCode.js"></script>
       <script src="./js/search/search_index.js"></script>

    </body>
</html>
